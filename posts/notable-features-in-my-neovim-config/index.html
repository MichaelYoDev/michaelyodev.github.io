<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>notable features in my neovim config - m1ch43ly0.dev</title><meta name=description content="A tour of the custom features I have built directly into my Neovim config, from a custom tabline and statusline to small QoL automations, showing how far you can go with minimal plugins."><link rel=apple-touch-icon sizes=180x180 href=/images/icons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/images/icons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/icons/favicon-16x16.png><link rel=manifest href=/images/icons/site.webmanifest><link rel=stylesheet href=/css/main.2a312d5f43bbd7092e724e10de672f5a2cef3b8f37d49399931cfc7a026a8f8c.css></head><body><div class=content><header><div class=main><a class=a-image href=https://michaelyodev.github.io/><img src=/images/buttons/m1ch43ly0_big.avif alt=m1ch43ly0.dev></a></div><header-nav><a href=/about/>about</a>
<a href=/posts/ class=active>posts</a>
<a href=/micro/>micro</a>
<a href=/now/>now</a>
<a href=/uses/>uses</a>
<a href=/gallery/>gallery</a>
<a href=/links/>links</a>
<a href=/tags/>tags</a>
<a href=/tags/gear/>gear</a>
<a href=/colophon/>colophon</a>
<a href=/license/>license</a>
<a href=/map/>sitemap</a></header-nav></header><hr class=header-hr><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>notable features in my neovim config</h1><div class=meta>Posted on 00Z01</div></div><section class=body><p>I have been using Neovim since my junior year of high school, and have gone through the phases of emulating an IDE with lazy.nvim, using dozens of plugins, to my current setup, where I rely on very few plugins and use a lot of features I built in myself.</p><p>Let us take a look at said features, the ones implemented directly in my config rather than through a plugin.</p><h2 id=buffer-tabline>buffer tabline</h2><p>This was inspired (and almost directly copied) from <a href=https://adamthiede.com/posts/2025-07-06_no-more-neovim-plugins.html>Adam Thiede</a>&rsquo;s blog, where he completely removed all of the neovim plugins he had been using.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- nvim/lua/stuff.lua</span>
</span></span><span class=line><span class=cl><span class=kr>function</span> <span class=nc>M</span><span class=p>.</span><span class=nf>BufferTabline</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_set_hl</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=s2>&#34;TablineBuffer&#34;</span><span class=p>,</span> <span class=p>{</span> <span class=n>link</span> <span class=o>=</span> <span class=s2>&#34;Normal&#34;</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>    <span class=kr>for</span> <span class=n>_</span><span class=p>,</span> <span class=n>buf</span> <span class=kr>in</span> <span class=n>ipairs</span><span class=p>(</span><span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_list_bufs</span><span class=p>())</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>        <span class=kr>if</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_buf_is_loaded</span><span class=p>(</span><span class=n>buf</span><span class=p>)</span> <span class=ow>and</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>buflisted</span><span class=p>(</span><span class=n>buf</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>            <span class=kd>local</span> <span class=n>name</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>fnamemodify</span><span class=p>(</span><span class=n>vim.fn</span><span class=p>.</span><span class=n>bufname</span><span class=p>(</span><span class=n>buf</span><span class=p>),</span> <span class=s2>&#34;:t&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kr>if</span> <span class=n>buf</span> <span class=o>==</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_get_current_buf</span><span class=p>()</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>                <span class=n>s</span> <span class=o>=</span> <span class=n>s</span> <span class=o>..</span> <span class=s1>&#39;%#TablineBuffer#[&#39;</span> <span class=o>..</span> <span class=n>name</span> <span class=o>..</span> <span class=s1>&#39;] &#39;</span>
</span></span><span class=line><span class=cl>            <span class=kr>else</span>
</span></span><span class=line><span class=cl>                <span class=n>s</span> <span class=o>=</span> <span class=n>s</span> <span class=o>..</span> <span class=s1>&#39;%#TablineBuffer# &#39;</span> <span class=o>..</span> <span class=n>name</span> <span class=o>..</span> <span class=s1>&#39;  &#39;</span>
</span></span><span class=line><span class=cl>            <span class=kr>end</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=n>s</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- nvim/init.lua</span>
</span></span><span class=line><span class=cl><span class=n>o.showtabline</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl><span class=n>o.tabline</span> <span class=o>=</span> <span class=s>[[%!v:lua.require(&#39;stuff&#39;).BufferTabline()]]</span>
</span></span></code></pre></div><p>This function replaces the usual tabline with a buffer list of sorts.</p><p>It gets all buffers with <code>nvim_list_bufs()</code>, filters to only loaded and listed buffers, extracts each buffer&rsquo;s filename (with no path), and adds each name to the tabline string. It then highlights the current buffer by wrapping it in <code>[ ]</code>.</p><p>The two lines in init.lua set the tabline to use that function.</p><h2 id=go-to-last-location-in-buffer>go to last location in buffer</h2><p>This one is a small QoL feature that makes my neovim experience just a bit smoother.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- nvim/init.lua</span>
</span></span><span class=line><span class=cl><span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_create_autocmd</span><span class=p>(</span><span class=s2>&#34;BufReadPost&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>callback</span> <span class=o>=</span> <span class=kr>function</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kd>local</span> <span class=n>mark</span> <span class=o>=</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_buf_get_mark</span><span class=p>(</span><span class=n>args.buf</span><span class=p>,</span> <span class=s1>&#39;&#34;&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kd>local</span> <span class=n>line_count</span> <span class=o>=</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_buf_line_count</span><span class=p>(</span><span class=n>args.buf</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>if</span> <span class=n>mark</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>mark</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>&lt;=</span> <span class=n>line_count</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_win_set_cursor</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=n>mark</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>vim.schedule</span><span class=p>(</span><span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=n>vim.cmd</span><span class=p>(</span><span class=s2>&#34;normal! zz&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kr>end</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>The autocommand triggers on <code>BufReadPost</code>, which happens when a file is opened.</p><p>It retrieves the last cursor position using <code>vim.api.nvim_buf_get_mark(args.buf, '"')</code>, which gets the saved mark for the buffer.</p><p>If the position is valid, the cursor is moved back to that location. Then, the screen is centered on the cursor using <code>vim.cmd("normal! zz")</code>.</p><h2 id=custom-statusline>custom statusline</h2><p>The default statusline had a bit too little information for me, and I did not want to use a plugin for that, so I took my favorite info sections from <a href=https://github.com/nvim-mini/mini.statusline>mini.statusline</a> and built it myself.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=kr>function</span> <span class=nc>M</span><span class=p>.</span><span class=nf>MyStatusLine</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>mode_map</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>n</span> <span class=o>=</span> <span class=s1>&#39;Normal&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span> <span class=o>=</span> <span class=s1>&#39;Insert&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>R</span> <span class=o>=</span> <span class=s1>&#39;Replace&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>v</span> <span class=o>=</span> <span class=s1>&#39;Visual&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>V</span> <span class=o>=</span> <span class=s1>&#39;V-Line&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;V-Block&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>c</span> <span class=o>=</span> <span class=s1>&#39;Command&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>s</span> <span class=o>=</span> <span class=s1>&#39;Select&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>S</span> <span class=o>=</span> <span class=s1>&#39;S-Line&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>[</span><span class=s1>&#39;&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=s1>&#39;S-Block&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=n>t</span> <span class=o>=</span> <span class=s1>&#39;Terminal&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>mode</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>mode</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>mode_name</span> <span class=o>=</span> <span class=n>mode_map</span><span class=p>[</span><span class=n>mode</span><span class=p>]</span> <span class=ow>or</span> <span class=n>mode</span><span class=p>:</span><span class=n>upper</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>filepath</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>expand</span><span class=p>(</span><span class=s1>&#39;%:~:.&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=n>filepath</span> <span class=o>==</span> <span class=s1>&#39;&#39;</span> <span class=kr>then</span> <span class=n>filepath</span> <span class=o>=</span> <span class=s1>&#39;[No Name]&#39;</span> <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>ft</span> <span class=o>=</span> <span class=n>vim.bo</span><span class=p>.</span><span class=n>filetype</span>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=n>ft</span> <span class=o>==</span> <span class=s1>&#39;&#39;</span> <span class=kr>then</span> <span class=n>ft</span> <span class=o>=</span> <span class=s1>&#39;none&#39;</span> <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>enc</span> <span class=o>=</span> <span class=n>vim.bo</span><span class=p>.</span><span class=n>fenc</span> <span class=o>~=</span> <span class=s1>&#39;&#39;</span> <span class=ow>and</span> <span class=n>vim.bo</span><span class=p>.</span><span class=n>fenc</span> <span class=ow>or</span> <span class=n>vim.o</span><span class=p>.</span><span class=n>enc</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>fmt</span> <span class=o>=</span> <span class=n>vim.bo</span><span class=p>.</span><span class=n>fileformat</span> <span class=o>==</span> <span class=s1>&#39;dos&#39;</span> <span class=ow>and</span> <span class=s1>&#39;CRLF&#39;</span> <span class=ow>or</span> <span class=s1>&#39;LF&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=kr>function</span> <span class=nf>size</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=kd>local</span> <span class=n>b</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>getfsize</span><span class=p>(</span><span class=n>vim.fn</span><span class=p>.</span><span class=n>expand</span><span class=p>(</span><span class=s1>&#39;%:p&#39;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=kr>if</span> <span class=n>b</span> <span class=o>&lt;=</span> <span class=mi>0</span> <span class=kr>then</span> <span class=kr>return</span> <span class=s1>&#39;0B&#39;</span> <span class=kr>end</span>
</span></span><span class=line><span class=cl>        <span class=kd>local</span> <span class=n>s</span> <span class=o>=</span> <span class=p>{</span> <span class=s1>&#39;B&#39;</span><span class=p>,</span> <span class=s1>&#39;K&#39;</span><span class=p>,</span> <span class=s1>&#39;M&#39;</span><span class=p>,</span> <span class=s1>&#39;G&#39;</span> <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kd>local</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=kr>while</span> <span class=n>b</span> <span class=o>&gt;=</span> <span class=mi>1024</span> <span class=ow>and</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=mi>4</span> <span class=kr>do</span>
</span></span><span class=line><span class=cl>            <span class=n>b</span> <span class=o>=</span> <span class=n>b</span> <span class=o>/</span> <span class=mi>1024</span><span class=p>;</span> <span class=n>i</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=kr>end</span>
</span></span><span class=line><span class=cl>        <span class=kr>return</span> <span class=p>(</span><span class=s1>&#39;%.1f%s&#39;</span><span class=p>):</span><span class=n>format</span><span class=p>(</span><span class=n>b</span><span class=p>,</span> <span class=n>s</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>l</span><span class=p>,</span> <span class=n>c</span><span class=p>,</span> <span class=n>tot</span> <span class=o>=</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>line</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>),</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>virtcol</span><span class=p>(</span><span class=s1>&#39;.&#39;</span><span class=p>),</span> <span class=n>vim.fn</span><span class=p>.</span><span class=n>line</span><span class=p>(</span><span class=s1>&#39;$&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>pct</span>       <span class=o>=</span> <span class=n>tot</span> <span class=o>&gt;</span> <span class=mi>0</span> <span class=ow>and</span> <span class=n>math.floor</span><span class=p>(</span><span class=n>l</span> <span class=o>*</span> <span class=mi>100</span> <span class=o>/</span> <span class=n>tot</span><span class=p>)</span> <span class=ow>or</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>left</span>      <span class=o>=</span> <span class=p>(</span><span class=s1>&#39; %s | %s &#39;</span><span class=p>):</span><span class=n>format</span><span class=p>(</span><span class=n>mode_name</span><span class=p>,</span> <span class=n>filepath</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>right</span>     <span class=o>=</span> <span class=n>table.concat</span><span class=p>({</span> <span class=n>ft</span><span class=p>,</span> <span class=n>enc</span> <span class=o>..</span> <span class=s1>&#39;[&#39;</span> <span class=o>..</span> <span class=n>fmt</span> <span class=o>..</span> <span class=s1>&#39;]&#39;</span><span class=p>,</span> <span class=n>size</span><span class=p>(),</span> <span class=n>pct</span> <span class=o>..</span> <span class=s1>&#39;%% &#39;</span> <span class=o>..</span> <span class=n>tot</span><span class=p>,</span> <span class=n>l</span> <span class=o>..</span> <span class=s1>&#39;:&#39;</span> <span class=o>..</span> <span class=n>c</span> <span class=p>},</span> <span class=s1>&#39; │ &#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>return</span> <span class=n>left</span> <span class=o>..</span> <span class=s1>&#39;%=&#39;</span> <span class=o>..</span> <span class=n>right</span> <span class=o>..</span> <span class=s1>&#39; &#39;</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>--nvim/init.lua</span>
</span></span><span class=line><span class=cl><span class=n>o.statusline</span> <span class=o>=</span> <span class=s>[[%!v:lua.require(&#39;stuff&#39;).MyStatusLine()]]</span>
</span></span></code></pre></div><p>My statusline shows the current mode, file path, filetype, encoding, file size, and cursor position with progress percentage. The left side displays the mode and file name, while the right side is right-aligned using <code>%=</code> and contains technical details and position info.</p><h2 id=yank-highlight>yank highlight</h2><p>I have seen many a config with this feature. It makes it slightly easier to know exactly what I yanked (yes, I sometimes mess up my vim motions ._.).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>-- nvim/init.lua</span>
</span></span><span class=line><span class=cl><span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_create_autocmd</span><span class=p>(</span><span class=s2>&#34;TextYankPost&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>group</span> <span class=o>=</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_create_augroup</span><span class=p>(</span><span class=s2>&#34;HighlightYank&#34;</span><span class=p>,</span> <span class=p>{}),</span>
</span></span><span class=line><span class=cl>    <span class=n>pattern</span> <span class=o>=</span> <span class=s2>&#34;*&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=n>callback</span> <span class=o>=</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>vim.highlight</span><span class=p>.</span><span class=n>on_yank</span><span class=p>({</span> <span class=n>higroup</span> <span class=o>=</span> <span class=s2>&#34;IncSearch&#34;</span><span class=p>,</span> <span class=n>timeout</span> <span class=o>=</span> <span class=mi>50</span> <span class=p>})</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p>This autocommand runs after text is yanked (<code>TextYankPost</code>). It briefly highlights the yanked text using the <code>IncSearch</code> highlight group, giving visual feedback that the yank succeeded. The highlight lasts for 50 milliseconds before disappearing.</p><h2 id=markdown2pdf>markdown2pdf</h2><p>I tend to use Markdown a lot (what you are reading right now was written in markdown!), and I wanted an easy way to convert the current markdown file into a pdf, using pandoc.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>--nvim/stuff.lua</span>
</span></span><span class=line><span class=cl><span class=kr>function</span> <span class=nc>M</span><span class=p>.</span><span class=nf>markdown2pdf</span><span class=p>(</span><span class=n>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=ow>not</span> <span class=n>input</span> <span class=ow>or</span> <span class=n>input</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>        <span class=n>print</span><span class=p>(</span><span class=s2>&#34;Usage: markdown2pdf(&lt;file.md&gt;)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>return</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>f</span> <span class=o>=</span> <span class=n>io.open</span><span class=p>(</span><span class=n>input</span><span class=p>,</span> <span class=s2>&#34;r&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=ow>not</span> <span class=n>f</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>        <span class=n>print</span><span class=p>(</span><span class=s2>&#34;File not found: &#34;</span> <span class=o>..</span> <span class=n>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>return</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>    <span class=n>f</span><span class=p>:</span><span class=n>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>filename</span> <span class=o>=</span> <span class=n>input</span><span class=p>:</span><span class=n>match</span><span class=p>(</span><span class=s2>&#34;([^/]+)%.md$&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=ow>not</span> <span class=n>filename</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>        <span class=n>print</span><span class=p>(</span><span class=s2>&#34;Invalid input file (must end in .md)&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=kr>return</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>home</span> <span class=o>=</span> <span class=n>os.getenv</span><span class=p>(</span><span class=s2>&#34;HOME&#34;</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&#34;~&#34;</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>output</span> <span class=o>=</span> <span class=n>home</span> <span class=o>..</span> <span class=s2>&#34;/Downloads/&#34;</span> <span class=o>..</span> <span class=n>filename</span> <span class=o>..</span> <span class=s2>&#34;.pdf&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>cmd</span> <span class=o>=</span> <span class=n>string.format</span><span class=p>(</span><span class=s1>&#39;pandoc &#34;%s&#34; -o &#34;%s&#34; -V geometry:margin=1in&#39;</span><span class=p>,</span> <span class=n>input</span><span class=p>,</span> <span class=n>output</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>ok</span> <span class=o>=</span> <span class=n>os.execute</span><span class=p>(</span><span class=n>cmd</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kr>if</span> <span class=n>ok</span> <span class=o>==</span> <span class=mi>0</span> <span class=kr>then</span>
</span></span><span class=line><span class=cl>        <span class=n>print</span><span class=p>(</span><span class=s2>&#34;PDF saved to &#34;</span> <span class=o>..</span> <span class=n>output</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>else</span>
</span></span><span class=line><span class=cl>        <span class=n>print</span><span class=p>(</span><span class=s2>&#34;Conversion failed&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=kr>end</span>
</span></span><span class=line><span class=cl><span class=kr>end</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-lua data-lang=lua><span class=line><span class=cl><span class=c1>--nvim/after/ftplugin/markdown.lua</span>
</span></span><span class=line><span class=cl><span class=kd>local</span> <span class=n>stuff</span> <span class=o>=</span> <span class=n>require</span><span class=p>(</span><span class=s1>&#39;stuff&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>vim.keymap</span><span class=p>.</span><span class=n>set</span><span class=p>(</span><span class=s1>&#39;n&#39;</span><span class=p>,</span> <span class=s1>&#39;&lt;leader&gt;mp&#39;</span><span class=p>,</span> <span class=kr>function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kd>local</span> <span class=n>input</span> <span class=o>=</span> <span class=n>vim.api</span><span class=p>.</span><span class=n>nvim_buf_get_name</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>stuff.markdown2pdf</span><span class=p>(</span><span class=n>input</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=kr>end</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=plugins>plugins</h2><p>These are the only plugins I use:</p><ul><li><a href=https://github.com/brianhuster/live-preview.nvim>live-preview.nvim</a>: preview websites in the browser</li><li><a href=https://github.com/chomosuke/typst-preview.nvim>typst-preview.nvim</a>: live rendering of typst files, also in the browser</li><li><a href=https://github.com/neanias/everforest-nvim>everforest-nvim</a>: my preferred colorscheme</li><li><a href=https://github.com/nvim-mini/mini.pick>mini.pick</a>: fuzzy picker for finding files and live grep</li><li><a href=https://github.com/nvim-treesitter/nvim-treesitter>nvim-treesitter</a>: better syntax highlighting</li></ul><h2 id=final-thoughts>final thoughts</h2><p>These custom-built features and plugins (or lack thereof) make my neovim experience extremely satisfying. Everything is fast and built exactly how I want it. I am still experimenting, and who knows? I might go back to using more plugins, or I might cut them out entirely.</p><p>I hope you got some inspiration for your config. Happy neovim hacking!</p><p><code>:wq</code></p></section><hr><div class=post-tags><nav class="nav tags"><ul class=tags><li><strong>Tagged with:</strong></li><li><a href=/%20tags/neovim>neovim</a></li><li><a href=/%20tags/programming>programming</a></li></ul></nav></div></div></div></div></article></main><footer class=site-footer><hr class=footer-hr><div class=footer-wrapper><div class=footer-cc>© 2025
Michael Oliveira<br><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/legalcode.en>CC BY-NC-SA 4.0</a></div><div class=footer-social><a href=https://github.com/MichaelYoDev title=GitHub rel="me noopener" target=_blank><img src=https://michaelyodev.github.io/svg/github.svg alt=GitHub class=icon>
</a><a href=https://youtube.com/@thetalentedkid08 title=YouTube rel="me noopener" target=_blank><img src=https://michaelyodev.github.io/svg/youtube.svg alt=YouTube class=icon>
</a><a href=https://instagram.com/michaelo.music title=Instagram rel="me noopener" target=_blank><img src=https://michaelyodev.github.io/svg/instagram.svg alt=Instagram class=icon>
</a><a href=https://michaelyodev.github.io/posts/index.xml title=RSS rel="me noopener" target=_blank><img src=https://michaelyodev.github.io/svg/rss.svg alt=RSS class=icon>
</a><a href=https://webring.xxiivv.com/m1ch43ly0 target=_blank rel=noopener><img src=https://michaelyodev.github.io/svg/icon.black.svg alt="merveilles webring" class=icon></a></div><div class=footer-buttons><a href=https://michaelyodev.github.io/ rel=noopener><img class=button src=/images/buttons/m1ch43ly0_4frames.gif alt=m1ch43ly0.dev>
</a><a href=https://neovim.io/ target=_blank rel=noopener><img class=button src=/images/buttons/neovim.png alt="Made with Neovim">
</a><a href=https://disable-javascript.org/ target=_blank rel=noopener><img class=button src=/images/buttons/javascriptfree.png alt="JavaScript Free">
</a><a href=http://www.anybrowser.org/campaign/ target=_blank rel=noopener><img class=button src=/images/buttons/best_viewed_with_eyes.gif alt="Best viewed with eyes"></a></div></div></footer></div></body></html>